(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8286],{60515:(e,r,s)=>{Promise.resolve().then(s.bind(s,27320))},27320:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>J});var a=s(95155),l=s(12115),t=s(69606),i=s(85060),n=s(76046),d=s(82698),o=s(14085),c=s(6700),m=s(50319),u=s(30814);let x=["1 year","2 years","3 years"],h=["apartment","shortlet","flat","hotel","condo"],p=["1 bed","2 beds","3 beds","4 beds","5+ beds"],g=["1 bath","2 baths","3 baths","4 baths","5+ baths"],f=["Gym","POP Ceiling","Water Treatment","Security","Parking Space","Spacious Compound","24/7 Electricity","Supermarket Nearby","Swimming Pool","Fast Internet","Restaurants Nearby","Free WiFi"],b=(e,r,s,a)=>{let l=Array.from(e).filter(e=>e.type.startsWith("image/")||e.type.startsWith("video/"));if(0===l.length){u.o.error("Invalid file type. Please upload images or videos.");return}l.forEach(e=>{if(e.size>5242880){u.o.error("File ".concat(e.name," exceeds 25MB limit"));return}let l=new FileReader;l.onloadend=()=>{let t=l.result;if("primary"===r)s("primaryFile",{name:e.name,data:t});else{let r=a("otherFiles")||[];r.length<7?s("otherFiles",[...r,{name:e.name,data:t}]):u.o.error("Maximum of 7 additional files allowed")}},l.readAsDataURL(e)})};var v=s(9955),j=s(29602);let N=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("textarea",{className:(0,j.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...l})});function y(e){let{className:r,minValue:s,maxValue:l}=e;return(0,a.jsxs)("section",{className:"".concat(r," bg-[#E6E6E6] text-[#000929] px-[10px] py-[6px] rounded-[6px]"),children:[(0,a.jsx)("span",{children:s}),"/",(0,a.jsx)("span",{children:l})]})}N.displayName="Textarea";var w=s(5565),F=s(45686);function z(e){let{src:r,onClick:s,onDelete:l}=e;return(0,a.jsx)("div",{className:"relative group cursor-pointer overflow-hidden rounded-lg aspect-square",onClick:s,children:r?(0,a.jsxs)(a.Fragment,{children:["string"==typeof r&&(r.endsWith(".mp4")||r.endsWith(".webm")||r.startsWith("data:video"))?(0,a.jsx)("video",{src:r,controls:!1,className:"object-cover h-full max-h-[200px] w-full transition-transform duration-300 group-hover:scale-110",onMouseEnter:e=>e.currentTarget.play(),onMouseLeave:e=>e.currentTarget.pause(),muted:!0}):(0,a.jsx)(w.default,{src:r,alt:"Media preview",fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-110"}),(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),l()},className:"absolute top-2 right-2 bg-white p-2 rounded-full shadow hover:bg-red-500 hover:text-white transition",children:(0,a.jsx)(F.A,{size:20})})]}):(0,a.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No media available"})})})}var P=s(40767),E=s(4559),k=s(84720);function C(e){let{setExpandedOtherFile:r,expandedOtherFile:s,files:t}=e,i=(0,l.useRef)(null),n=(0,l.useRef)(null),d=e=>{let a=t.indexOf(s)+e;a>=0&&a<t.length&&r(t[a])};return((0,l.useEffect)(()=>{i.current&&i.current.load()},[s]),s)?(0,a.jsx)("div",{ref:n,className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[9999]",onClick:e=>{e.target===n.current&&r(null)},children:(0,a.jsxs)("div",{className:"relative bg-white p-4 rounded-lg min-w-[40vw] max-w-[80vw]  max-h-[90vh] flex flex-col items-center",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(o.$,{variant:"default",className:"absolute top-2 right-2 bg-[#7065F0] hover:bg-[#5A4DE6] text-white size-8 p-2 z-[9999]",onClick:()=>r(null),children:(0,a.jsx)(P.A,{className:"w-full h-full"})}),(0,a.jsxs)("div",{className:"w-full h-full mt-8",children:[(0,a.jsx)("div",{className:"relative flex items-center justify-center min-h-[300px]",children:(e=>{let r=e.toLowerCase();return r.endsWith(".mp4")||r.endsWith(".webm")})(s)?(0,a.jsxs)("video",{ref:i,controls:!0,controlsList:"nodownload",playsInline:!0,className:"max-w-full max-h-[70vh] object-contain",children:[(0,a.jsx)("source",{src:s,type:(e=>{switch(e.toLowerCase().split(".").pop()){case"mp4":default:return"video/mp4";case"webm":return"video/webm"}})(s)}),"Your browser doesn't support this video format."]}):(0,a.jsx)(w.default,{src:s,alt:"Expanded view",className:"max-w-full max-h-[70vh] object-contain",width:800,height:600,priority:!0})}),t.length>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between w-full px-5 py-2 mt-1",children:[(0,a.jsx)(o.$,{variant:"ghost",className:"rounded-full !size-10 disabled:opacity-30",onClick:e=>{e.stopPropagation(),d(-1)},disabled:0===t.indexOf(s),children:(0,a.jsx)(E.A,{className:"!size-10 text-black"})}),(0,a.jsx)(o.$,{variant:"ghost",className:"rounded-full !size-10 disabled:opacity-30",onClick:e=>{e.stopPropagation(),d(1)},disabled:t.indexOf(s)===t.length-1,children:(0,a.jsx)(k.A,{className:"!size-10 text-black"})})]})]})]})}):null}function D(e){var r,s,t,i;let{watch:n,otherFiles:d=[],primaryFile:o,onImageDelete:c}=e,[m,u]=(0,l.useState)(null),x=n();return(0,a.jsxs)("aside",{className:"hidden lg:block w-full max-w-[520px]",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-[1.25rem] font-medium mb-3 capitalize",children:"property listing preview"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"relative w-full min-h-[200px] max-h-[300px] overflow-hidden rounded-[16px] bg-white shadow-md shadow-[#000000]/35 p-4",children:(0,a.jsx)("div",{children:(null==o?void 0:o.data)?(0,a.jsx)(z,{src:o.data,onClick:()=>u(o.data),onDelete:()=>c("primary",0)}):(0,a.jsx)("div",{className:"col-span-3 flex items-center justify-center h-full",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Add the main image"})})})}),(0,a.jsx)(y,{minValue:(null==o?void 0:o.data)?1:0,maxValue:1,className:"w-fit text-[0.75rem] ml-auto mt-2"})]}),(0,a.jsxs)("div",{className:"mt-5",children:[(0,a.jsx)("div",{className:"relative w-full min-h-[200px] max-h-[350px] overflow-y-auto rounded-[16px] bg-white shadow-md shadow-[#000000]/35 p-4",children:(0,a.jsx)("div",{className:"grid grid-cols-[repeat(3,_minmax(0,_150px))] gap-4",children:d.length>0?d.map((e,r)=>(0,a.jsx)(z,{src:e.data,onClick:()=>u(e.data),onDelete:()=>c("other",r)},r)):(0,a.jsx)("div",{className:"col-span-3 flex items-center justify-center h-full",children:(0,a.jsx)("p",{className:"text-gray-400",children:"Add up to 7 images"})})})}),(0,a.jsx)(y,{minValue:d.length,maxValue:7,className:"w-fit text-[0.75rem] ml-auto mt-2"})]}),(0,a.jsxs)("div",{className:"mt-10 w-full relative",children:[(0,a.jsx)(v.p,{value:x.address,disabled:!0,className:"border border-[#E6E6E6] focus-visible:ring-0 focus-visible:outline-0 w-full"}),(0,a.jsx)(y,{minValue:(null===(r=x.address)||void 0===r?void 0:r.length)||0,maxValue:150,className:"text-[0.75rem] w-fit mt-2"})]}),(0,a.jsxs)("div",{className:"mt-10 w-full relative",children:[(0,a.jsx)(N,{value:x.description,disabled:!0,className:"border border-[#E6E6E6] focus-visible:ring-0 focus-visible:outline-0 w-full"}),(0,a.jsx)(y,{minValue:(null===(s=x.description)||void 0===s?void 0:s.length)||0,maxValue:1500,className:"text-[0.75rem] w-fit mt-2"})]}),(0,a.jsxs)("div",{className:"capitalize flex items-center space-x-3 text-[1.125rem] mt-10",children:[(0,a.jsx)("h3",{className:"capitalize",children:"price"}),(0,a.jsxs)("div",{className:"flex items-center space-x-px",children:[(0,a.jsx)("span",{className:"flex items-center line-through decoration-double",children:"N"}),(0,a.jsx)("span",{children:(i=(null===(t=x.price)||void 0===t?void 0:t.toString())||"0",(0,l.useMemo)(()=>("number"==typeof i?i.toString():i).replace(/\B(?=(\d{3})+(?!\d))/g,","),[i]))})]})]}),(0,a.jsxs)("div",{className:"mt-10 ",children:[(0,a.jsx)("h3",{className:"capitalize",children:"Duration"}),(0,a.jsx)("div",{className:"mt-1 block w-fit rounded-md border border-gray-300 bg-[#F7F7F7] py-2 px-3",children:x.duration})]}),(0,a.jsxs)("div",{className:"mt-10 ",children:[(0,a.jsx)("h3",{className:"capitalize",children:"building Type"}),(0,a.jsx)("div",{className:"mt-1 block w-fit rounded-md border border-gray-300 bg-[#F7F7F7] py-2 px-3",children:x.buildingType})]}),(0,a.jsxs)("div",{className:"mt-10 ",children:[(0,a.jsx)("h3",{className:"capitalize",children:"Beds"}),(0,a.jsx)("div",{className:"mt-1 block w-fit rounded-md border border-gray-300 bg-[#F7F7F7] py-2 px-3",children:x.beds})]}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h3",{className:"capitalize",children:"Baths"}),(0,a.jsx)("div",{className:"mt-1 block w-fit rounded-md border border-gray-300 bg-[#F7F7F7] py-2 px-3",children:x.baths})]}),(0,a.jsxs)("div",{className:"mt-10 w-full",children:[(0,a.jsx)("h3",{className:"capitalize",children:"amenities"}),(0,a.jsx)("div",{className:"flex items-center flex-wrap gap-2 text-sm ",children:x.amenities.map(e=>(0,a.jsx)("span",{className:"mt-1 rounded-md border border-[#E6E6E6] bg-[#F7F7F7] py-2 px-3",children:e},e))})]}),m&&(0,a.jsx)(C,{expandedOtherFile:m,setExpandedOtherFile:u,files:d.map(e=>e.data)})]})}var S=s(87780),A=s(53608),_=s(75024),q=s(98867);let O=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)(_.bL,{ref:r,className:(0,j.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...l,children:(0,a.jsx)(_.C1,{className:(0,j.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})})});O.displayName=_.bL.displayName;var I=s(77163),T=s(15785);function L(e){let{label:r,type:s,handleFileUpload:t,isDragging:i,onDragEnter:n,onDragLeave:d,onDragOver:o,onDrop:c,files:m,removeFile:u}=e,x=l.useRef(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("p",{className:"text-sm my-px",children:r}),(0,a.jsx)("div",{className:"bg-white h-40 w-full lg:max-w-[416px] rounded-lg flex items-center justify-center shadow-sm ".concat(i?"border-solid border-[#7065F0]":"border-dashed border-[#CACACA]"," border"),onDragEnter:n,onDragLeave:d,onDragOver:o,onDrop:c,children:(0,a.jsxs)("label",{className:"w-[90%] h-[85%] flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("input",{ref:x,type:"file",className:"hidden",onChange:e=>t(e,s),accept:"image/*, video/mp4, video/webm",multiple:"Other files"===r}),(0,a.jsx)("span",{className:"w-11 h-11 bg-[#F5F5F5] flex items-center justify-center rounded-full mb-2",children:(0,a.jsx)(I.A,{className:"text-[#7065F0]",size:24})}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("p",{className:"text-center text-sm",children:[(0,a.jsx)("span",{className:"text-[#7065F0] font-medium hover:underline",children:"Click to upload"})," ","or"," ",(0,a.jsx)("span",{className:"text-[#7065F0] font-medium hover:underline",children:"Drag and drop"})]}),(0,a.jsx)("small",{className:"text-[#707070] mt-1",children:"(Max. file size: 25 MB)"})]})]})})]}),m.length>0&&(0,a.jsx)("div",{className:"block md:hidden mt-2 w-full",children:(0,a.jsx)("div",{className:"space-y-2 w-full",children:m.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-100 p-2 rounded-md w-full",children:[(0,a.jsx)(T.J,{className:"text-sm inline-block truncate max-w-[300px] sm:max-w-[320px] md:max-w-[420px]",children:e.name}),u&&(0,a.jsx)("button",{type:"button",onClick:()=>u(r),className:"text-red-500 hover:bg-red-100 rounded-full p-1",children:(0,a.jsx)(P.A,{size:16})})]},r))})})]})}function V(e){let{label:r,selected:s,onClick:l,className:t=""}=e;return(0,a.jsx)(o.$,{variant:"outline",type:"button",onClick:e=>{e.preventDefault(),l()},className:"capitalize flex items-center px-2 rounded-lg border border-gray-400 w-24 transition-all duration-200 ".concat(s?"bg-[#7065f0] text-white":"hover:bg-[#7065f0]/10"," ").concat(t),children:(0,a.jsx)("span",{className:"truncate",children:r})})}function R(e){let{message:r}=e;return r?(0,a.jsx)("p",{className:"text-red-500 text-sm mt-2",children:r}):null}function W(e){let{errors:r}=e,s=Object.values(r).map(e=>e.message||null).filter(Boolean);return 0===s.length?null:(0,a.jsxs)("div",{className:"bg-red-100 text-red-600 p-4 rounded",children:[(0,a.jsx)("h3",{className:"font-bold mb-2",children:"Please fix the following errors:"}),(0,a.jsx)("ul",{className:"list-disc pl-5",children:s.map((e,r)=>(0,a.jsx)("li",{children:e},r))})]})}function B(e){var r,s,i,n,d,c,m,u;let{control:b,errors:j,watch:w,setValue:F,handlePrimaryFileUpload:z,handleOtherFileUpload:P,handleSaveDraft:E,onDragEnter:k,onDragLeave:C,onDragOver:D,onDrop:_,onInputChange:q,onSubmit:I,isDragging:B}=e;return(0,a.jsxs)("aside",{className:"mx-auto flex flex-col space-y-8 bg-gradient-to-b from-neutral-50 to-white/70 rounded-lg",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-[1.25rem] font-medium mb-3 capitalize",children:"Property Listing Form"}),(0,a.jsx)(W,{errors:j}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I(e)},className:"w-full space-y-8",children:[(0,a.jsxs)("section",{"aria-label":"Image Upload",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Add Images"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-10",children:[(0,a.jsx)(L,{label:"Primary file",type:"primary",handleFileUpload:e=>z(e,"primary"),isDragging:B,onDragEnter:k,onDragLeave:C,onDragOver:D,onDrop:e=>_(e,"primary"),files:w("primaryFile")?[w("primaryFile")]:[],removeFile:()=>{F("primaryFile",{name:"",data:""})}}),(0,a.jsx)(L,{label:"Other files",type:"other",handleFileUpload:e=>P(e,"other"),isDragging:B,onDragEnter:k,onDragLeave:C,onDragOver:D,onDrop:e=>_(e,"other"),files:w("otherFiles")||[],removeFile:e=>{F("otherFiles",(w("otherFiles")||[]).filter((r,s)=>s!==e))}})]})]}),(0,a.jsxs)("div",{className:"mt-10 w-full md:w-[200px] h-auto",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Price"}),(0,a.jsx)(t.xI,{name:"price",control:b,rules:{required:"Price is required",validate:e=>!isNaN(Number(e))||"Price must be a valid number"},render:e=>{let{field:r}=e;return(0,a.jsx)(v.p,{...r,type:"number",min:0,step:.01,className:"pl-8 focus-visible:ring-1 focus-visible:ring-[#7065F0] bg-[#F7F7F7] border border-[#E6E6E6]",placeholder:"Enter property price"})}}),(0,a.jsx)(R,{message:null===(r=j.price)||void 0===r?void 0:r.message})]}),(0,a.jsxs)("div",{className:"w-full mt-10 md:w-[200px] h-auto",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Duration"}),(0,a.jsx)(t.xI,{name:"duration",control:b,render:e=>{let{field:r}=e;return(0,a.jsx)("select",{...r,className:"w-full rounded-md border border-gray-300 bg-[#F7F7F7] py-2 px-3 shadow-sm focus:border-[#7065F0] focus:outline-none focus:ring-1 focus:ring-[#7065F0]",children:x.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})}}),(0,a.jsx)(R,{message:null===(s=j.duration)||void 0===s?void 0:s.message})]}),(0,a.jsxs)("div",{className:" mt-10",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Building Type"}),(0,a.jsx)(t.xI,{name:"buildingType",control:b,render:e=>{let{field:r}=e;return(0,a.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mt-2",children:h.map(e=>(0,l.createElement)(V,{...r,key:e,label:e,selected:r.value===e,onClick:()=>{r.onChange(e)}}))})}}),(0,a.jsx)(R,{message:null===(i=j.buildingType)||void 0===i?void 0:i.message})]}),[{label:"No. of Beds",options:p,fieldName:"beds"},{label:"No. of Baths",options:g,fieldName:"baths"}].map((e,r)=>{let{label:s,options:i,fieldName:n}=e;return(0,a.jsx)(l.Fragment,{children:function(e){var r;let{control:s,label:i,options:n,fieldName:d,errors:o}=e;return(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:i}),(0,a.jsx)(t.xI,{name:d,control:s,render:e=>{let{field:r}=e;return(0,a.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 mt-2",children:n.map(e=>(0,l.createElement)(V,{...r,key:e,label:e,selected:r.value===e,onClick:()=>r.onChange(e)}))})}}),(0,a.jsx)(R,{message:null===(r=o[d])||void 0===r?void 0:r.message})]})}({errors:j,control:b,label:s,options:i,fieldName:n})},"".concat(n,"-").concat(r))}),(0,a.jsxs)("div",{className:"mt-10",children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Amenities"}),(0,a.jsx)(t.xI,{name:"amenities",control:b,render:e=>{let{field:r}=e;return(0,a.jsx)("div",{className:"mt-2 grid grid-cols-2 lg:grid-cols-3 gap-5",children:f.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(O,{...r,id:"preview-".concat(e),checked:null===(s=r.value)||void 0===s?void 0:s.includes(e),onCheckedChange:s=>{let a=s?[...r.value||[],e]:(r.value||[]).filter(r=>r!==e);r.onChange(a)}}),(0,a.jsx)(T.J,{htmlFor:"preview-".concat(e),children:e})]},e)})})}}),(0,a.jsx)(R,{message:null===(n=j.amenities)||void 0===n?void 0:n.message})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(t.xI,{name:"address",control:b,render:e=>{let{field:r}=e;return(0,a.jsx)(v.p,{...r,onChange:e=>{r.onChange(e),q("address",e.target.value)},className:"bg-[#F7F7F7] border border-[#E6E6E6] pr-14 focus-visible:ring-1 focus-visible:ring-[#7065F0]",placeholder:"Enter property address","aria-label":"Property address"})}}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-5",children:[(0,a.jsx)(y,{minValue:(null===(d=w("address"))||void 0===d?void 0:d.length)||0,maxValue:150,className:"bg-[#F7F7F7] text-xs w-fit"}),(0,a.jsx)(R,{message:null===(c=j.address)||void 0===c?void 0:c.message})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-[#000929] text-xl font-medium mb-3",children:"Description"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(t.xI,{name:"description",control:b,render:e=>{let{field:r}=e;return(0,a.jsx)(N,{...r,onChange:e=>{r.onChange(e),q("description",e.target.value)},className:"bg-[#F7F7F7] border border-[#E6E6E6] pr-14 focus-visible:ring-1 focus-visible:ring-[#7065F0] min-h-[150px]",placeholder:"Describe the property","aria-label":"Property description"})}}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-5",children:[(0,a.jsx)(y,{minValue:(null===(m=w("description"))||void 0===m?void 0:m.length)||0,maxValue:1500,className:"bg-[#F7F7F7] text-xs w-fit"}),(0,a.jsx)(R,{message:null===(u=j.description)||void 0===u?void 0:u.message})]})]})]}),(0,a.jsxs)("section",{className:"flex items-center justify-center gap-6 pt-4",children:[(0,a.jsxs)(o.$,{type:"button",onClick:E,className:"flex items-center gap-2 h-12 lg:text-[1.1rem] bg-white text-[#037F4A] shadow-sm hover:bg-[#F5FFF9] border border-[#037F4A] transition-colors","aria-label":"Save draft",children:[(0,a.jsx)("span",{children:"Save"}),(0,a.jsx)(S.A,{size:18})]}),(0,a.jsxs)(o.$,{type:"submit",className:"flex items-center gap-2 h-12 lg:text-[1.1rem] bg-[#7065F0] hover:bg-[#5B52C5] transition-colors","aria-label":"Upload listing",children:[(0,a.jsx)("span",{children:"Upload"}),(0,a.jsx)(A.A,{size:18})]})]})]})]})}let M="property_listing_draft",U={address:"",description:"",price:"",duration:"1 year",primaryFile:{name:"",data:""},otherFiles:[],buildingType:"flat",beds:"2 beds",baths:"3 baths",amenities:[],error:null,errorMessage:null};function J(){let e=(0,n.useRouter)(),[r,s]=(0,l.useState)(null),[x,h]=(0,l.useState)(!1),{handleSubmit:p,watch:g,setValue:f,control:v,formState:{errors:j}}=(0,t.mN)({resolver:(0,i.u)(m.Ry),defaultValues:U,mode:"onChange"}),N=g();(0,l.useEffect)(()=>{let e=setTimeout(()=>{try{let e=JSON.parse(JSON.stringify(N));localStorage.setItem(M,JSON.stringify(e))}catch(e){console.error("Error saving draft:",e)}},1e3);return()=>clearTimeout(e)},[N]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{try{localStorage.setItem(M,JSON.stringify(N))}catch(e){console.error("Error saving draft:",e)}},1e3);return()=>clearTimeout(e)},[N]);let y=(e,r)=>{var s,a;e.preventDefault(),(null===(a=e.target)||void 0===a?void 0:null===(s=a.files)||void 0===s?void 0:s.length)&&b(e.target.files,r,f,g)},w=(e,r)=>{e.preventDefault(),e.stopPropagation(),h(r);let s=e.currentTarget;r?s.classList.add("drag-over"):s.classList.remove("drag-over")},F=async r=>{if(!r.primaryFile||!r.primaryFile.data){s({field:"primaryFile",message:"Primary image is required"});return}try{localStorage.removeItem(M),e.push("/admin/property-management")}catch(e){console.error("Error submitting form:",e),s({field:"submit",message:"Failed to submit the form"})}};return(0,a.jsx)(c.default,{title:"Create Listing",children:(0,a.jsxs)("main",{className:"p-5",children:[(0,a.jsxs)(o.$,{variant:"default",onClick:()=>e.push("/admin/property-management"),className:"capitalize flex items-center space-x-1 bg-[#7065F0] mb-5",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("span",{children:"Go Back"})]}),r&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:r.message}),(0,a.jsxs)("section",{className:"w-full grid lg:grid-cols-2 gap-20",children:[(0,a.jsx)(B,{control:v,errors:j,watch:g,setValue:f,onInputChange:f,handlePrimaryFileUpload:e=>y(e,"primary"),handleOtherFileUpload:e=>y(e,"other"),onDragOver:e=>w(e,!0),onDragEnter:e=>w(e,!0),onDragLeave:e=>w(e,!1),handleSaveDraft:()=>{try{u.o.success("Draft saved successfully")}catch(e){console.error("Error saving draft:",e),u.o.error("Failed to save draft.")}},isDragging:x,onDrop:(e,r)=>{e.preventDefault(),h(!1),b(e.dataTransfer.files,r,f,g)},onSubmit:p(F)}),(0,a.jsx)(D,{watch:g,primaryFile:g("primaryFile"),otherFiles:g("otherFiles"),onImageDelete:(e,r)=>{confirm("Are you sure you want to delete this file?")&&("primary"===e?(f("primaryFile",{name:"",data:""}),u.o.success("Primary file removed")):"other"===e&&void 0!==r&&(f("otherFiles",(g("otherFiles")||[]).filter((e,s)=>s!==r)),u.o.success("File removed")))}})]})]})})}},15785:(e,r,s)=>{"use strict";s.d(r,{J:()=>o});var a=s(95155),l=s(12115),t=s(46195),i=s(40652),n=s(29602);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)(t.b,{ref:r,className:(0,n.cn)(d(),s),...l})});o.displayName=t.b.displayName},50319:(e,r,s)=>{"use strict";s.d(r,{E9:()=>i,Ry:()=>o,Sd:()=>l,X5:()=>t,oW:()=>n,yo:()=>d});var a=s(43415);let l=a.z.object({email:a.z.string({required_error:"Please enter a valid email address."}).email(),password:a.z.string({required_error:"Please enter a password."}),confirmPassword:a.z.string({required_error:"Please confirm your password."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords must match."}),t=a.z.object({email:a.z.string({required_error:"Please enter a valid email address."}).email()}),i=a.z.object({email:a.z.string({required_error:"Please enter a valid email address."}).email()}),n=a.z.object({password:a.z.string({required_error:"Please enter a password."}),confirmPassword:a.z.string({required_error:"Please confirm your password."})}).refine(e=>e.password===e.confirmPassword,{path:["confirmPassword"],message:"Passwords must match."}),d=a.z.object({name:a.z.string({required_error:"Please enter your full name"}),email:a.z.string({required_error:"Please enter a valid email address."}).email(),message:a.z.string({required_error:"Please enter a message"})}),o=a.z.object({address:a.z.string().min(1,"Address is required").max(150,"Address must be less than 150 characters"),description:a.z.string().min(1,"Description is required").max(1500,"Description must be less than 1500 characters"),price:a.z.string().min(1,"Price is required").refine(e=>!isNaN(Number(e)),"Price must be a valid number"),duration:a.z.enum(["1 year","2 years","3 years"],{required_error:"Please select a duration"}),primaryFile:a.z.string().min(1,"Main image is required"),otherFiles:a.z.array(a.z.string()).min(1,"At least one image is required for other images").max(7,"Maximum 6 images allowed"),buildingType:a.z.enum(["apartment","shortlet","flat","hotel","condo"],{required_error:"Please select a building type"}),beds:a.z.enum(["1 bed","2 beds","3 beds","4 beds","5+ beds"],{required_error:"Please select number of beds"}),baths:a.z.enum(["1 bath","2 baths","3 baths","4 baths","5+ baths"],{required_error:"Please select number of baths"}),amenities:a.z.array(a.z.enum(["Gym","POP Ceiling","Water Treatment","Security","Parking Space","Spacious Compound","24/7 Electricity","Supermarket Nearby","Swimming Pool","Fast Internet","Restaurants Nearby","Free WiFi"])),error:a.z.string().nullable()})}},e=>{var r=r=>e(e.s=r);e.O(0,[8173,2115,7518,814,1171,1535,6700,8441,1517,7358],()=>r(60515)),_N_E=e.O()}]);